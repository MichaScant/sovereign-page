{"ast":null,"code":"import { useMemo, useLayoutEffect, useEffect, useRef, useCallback } from 'react';\n\nfunction useCombinedRefs(...refs) {\n  return useMemo(() => node => {\n    refs.forEach(ref => ref(node));\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  refs);\n} // https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\n\n\nconst canUseDOM = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined';\n/**\r\n * A hook that resolves to useEffect on the server and useLayoutEffect on the client\r\n * @param callback {function} Callback function that is invoked when the dependencies of the hook change\r\n */\n\nconst useIsomorphicLayoutEffect = canUseDOM ? useLayoutEffect : useEffect;\n\nfunction useInterval() {\n  const intervalRef = useRef(null);\n  const set = useCallback((listener, duration) => {\n    intervalRef.current = setInterval(listener, duration);\n  }, []);\n  const clear = useCallback(() => {\n    if (intervalRef.current !== null) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n  }, []);\n  return [set, clear];\n}\n\nfunction useLazyMemo(callback, dependencies) {\n  const valueRef = useRef();\n  return useMemo(() => {\n    const newValue = callback(valueRef.current);\n    valueRef.current = newValue;\n    return newValue;\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [...dependencies]);\n}\n\nfunction useNodeRef() {\n  const node = useRef(null);\n  const setNodeRef = useCallback(element => {\n    node.current = element;\n  }, []);\n  return [node, setNodeRef];\n}\n\nlet ids = {};\n\nfunction useUniqueId(prefix, value) {\n  return useMemo(() => {\n    if (value) {\n      return value;\n    }\n\n    const id = ids[prefix] == null ? 0 : ids[prefix] + 1;\n    ids[prefix] = id;\n    return `${prefix}-${id}`;\n  }, [prefix, value]);\n}\n\nfunction createAdjustmentFn(modifier) {\n  return (object, ...adjustments) => {\n    return adjustments.reduce((accumulator, adjustment) => {\n      const entries = Object.entries(adjustment);\n\n      for (const [key, valueAdjustment] of entries) {\n        const value = accumulator[key];\n\n        if (value != null) {\n          accumulator[key] = value + modifier * valueAdjustment;\n        }\n      }\n\n      return accumulator;\n    }, { ...object\n    });\n  };\n}\n\nconst add = /*#__PURE__*/createAdjustmentFn(1);\nconst subtract = /*#__PURE__*/createAdjustmentFn(-1);\nconst CSS = /*#__PURE__*/Object.freeze({\n  Translate: {\n    toString(transform) {\n      if (!transform) {\n        return;\n      }\n\n      const {\n        x,\n        y\n      } = transform;\n      return `translate3d(${x ? Math.round(x) : 0}px, ${y ? Math.round(y) : 0}px, 0)`;\n    }\n\n  },\n  Scale: {\n    toString(transform) {\n      if (!transform) {\n        return;\n      }\n\n      const {\n        scaleX,\n        scaleY\n      } = transform;\n      return `scaleX(${scaleX}) scaleY(${scaleY})`;\n    }\n\n  },\n  Transform: {\n    toString(transform) {\n      if (!transform) {\n        return;\n      }\n\n      return [CSS.Translate.toString(transform), CSS.Scale.toString(transform)].join(' ');\n    }\n\n  },\n  Transition: {\n    toString({\n      property,\n      duration,\n      easing\n    }) {\n      return `${property} ${duration}ms ${easing}`;\n    }\n\n  }\n});\nexport { CSS, add, canUseDOM, subtract, useCombinedRefs, useInterval, useIsomorphicLayoutEffect, useLazyMemo, useNodeRef, useUniqueId };","map":{"version":3,"sources":["../src/hooks/useCombinedRefs.ts","../src/execution-context.ts","../src/hooks/useIsomorphicLayoutEffect.ts","../src/hooks/useInterval.ts","../src/hooks/useLazyMemo.ts","../src/hooks/useNodeRef.ts","../src/hooks/useUniqueId.ts","../src/adjustment.ts","../src/css.ts"],"names":["useCombinedRefs","refs","useMemo","node","ref","canUseDOM","window","useIsomorphicLayoutEffect","useInterval","intervalRef","useRef","set","useCallback","setInterval","clear","clearInterval","useLazyMemo","callback","dependencies","valueRef","newValue","useNodeRef","setNodeRef","element","ids","useUniqueId","prefix","value","id","entries","Object","accumulator","modifier","object","add","createAdjustmentFn","subtract","CSS","Translate","toString","y","x","Math","Scale","scaleY","scaleX","Transform","Transition","easing","property","duration"],"mappings":"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","sourcesContent":["import {useMemo} from 'react';\n\nexport function useCombinedRefs<T>(\n  ...refs: ((node: T) => void)[]\n): (node: T) => void {\n  return useMemo(\n    () => (node: T) => {\n      refs.forEach((ref) => ref(node));\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    refs\n  );\n}\n","// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\nexport const canUseDOM =\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined';\n","import {useEffect, useLayoutEffect} from 'react';\n\nimport {canUseDOM} from '../execution-context';\n\n/**\n * A hook that resolves to useEffect on the server and useLayoutEffect on the client\n * @param callback {function} Callback function that is invoked when the dependencies of the hook change\n */\nexport const useIsomorphicLayoutEffect = canUseDOM\n  ? useLayoutEffect\n  : useEffect;\n","import {useCallback, useRef} from 'react';\n\nexport function useInterval() {\n  const intervalRef = useRef<number | null>(null);\n\n  const set = useCallback((listener: Function, duration: number) => {\n    intervalRef.current = setInterval(listener, duration);\n  }, []);\n\n  const clear = useCallback(() => {\n    if (intervalRef.current !== null) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n  }, []);\n\n  return [set, clear] as const;\n}\n","import {useMemo, useRef} from 'react';\n\nexport function useLazyMemo<T>(\n  callback: (prevValue: T | undefined) => T,\n  dependencies: any[]\n) {\n  const valueRef = useRef<T>();\n\n  return useMemo(\n    () => {\n      const newValue = callback(valueRef.current);\n      valueRef.current = newValue;\n\n      return newValue;\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [...dependencies]\n  );\n}\n","import {useRef, useCallback} from 'react';\n\nexport function useNodeRef() {\n  const node = useRef<HTMLElement | null>(null);\n  const setNodeRef = useCallback((element: HTMLElement | null) => {\n    node.current = element;\n  }, []);\n\n  return [node, setNodeRef] as const;\n}\n","import {useMemo} from 'react';\n\nlet ids: Record<string, number> = {};\n\nexport function useUniqueId(prefix: string, value?: string) {\n  return useMemo(() => {\n    if (value) {\n      return value;\n    }\n\n    const id = ids[prefix] == null ? 0 : ids[prefix] + 1;\n    ids[prefix] = id;\n\n    return `${prefix}-${id}`;\n  }, [prefix, value]);\n}\n","function createAdjustmentFn(modifier: number) {\n  return <T extends Record<U, number>, U extends string>(\n    object: T,\n    ...adjustments: Partial<T>[]\n  ): T => {\n    return adjustments.reduce<T>(\n      (accumulator, adjustment) => {\n        const entries = Object.entries(adjustment) as [U, number][];\n\n        for (const [key, valueAdjustment] of entries) {\n          const value = accumulator[key];\n\n          if (value != null) {\n            accumulator[key] = (value + modifier * valueAdjustment) as T[U];\n          }\n        }\n\n        return accumulator;\n      },\n      {\n        ...object,\n      }\n    );\n  };\n}\n\nexport const add = createAdjustmentFn(1);\nexport const subtract = createAdjustmentFn(-1);\n","export type Transform = {\n  x: number;\n  y: number;\n  scaleX: number;\n  scaleY: number;\n};\n\nexport interface Transition {\n  property: string;\n  easing: string;\n  duration: number;\n}\n\nexport const CSS = Object.freeze({\n  Translate: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      const {x, y} = transform;\n\n      return `translate3d(${x ? Math.round(x) : 0}px, ${\n        y ? Math.round(y) : 0\n      }px, 0)`;\n    },\n  },\n  Scale: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      const {scaleX, scaleY} = transform;\n\n      return `scaleX(${scaleX}) scaleY(${scaleY})`;\n    },\n  },\n  Transform: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      return [\n        CSS.Translate.toString(transform),\n        CSS.Scale.toString(transform),\n      ].join(' ');\n    },\n  },\n  Transition: {\n    toString({property, duration, easing}: Transition) {\n      return `${property} ${duration}ms ${easing}`;\n    },\n  },\n});\n"]},"metadata":{},"sourceType":"module"}