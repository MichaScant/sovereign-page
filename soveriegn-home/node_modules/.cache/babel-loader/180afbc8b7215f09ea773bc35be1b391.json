{"ast":null,"code":"import _toConsumableArray from\"/Users/michael/Desktop/sovereign-page/soveriegn-home/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/michael/Desktop/sovereign-page/soveriegn-home/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import\"./GridGame.css\";import{DndContext,useDraggable,DragOverlay}from'@dnd-kit/core';import{Draggable}from'./Draggable';import{Droppable_Green}from'./Droppable_green';import{Droppable_white}from'./Droppable_white';import{Draggable2}from'./Draggable2';import'./DraggableProperties';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var isTurnRed=true;var isTurnBlack=false;function buildGrid(){var grid=[];var element=1;for(var y=1;y<9;y++){grid[y]=[];for(var x=1;x<9;x++){grid[y][x]=String(element);element++;}}return grid;}function DraggableItem(_ref){var handle=_ref.handle,identifier=_ref.identifier;var _useDraggable=useDraggable({id:String(identifier)}),isDragging=_useDraggable.isDragging,setNodeRef=_useDraggable.setNodeRef,listeners=_useDraggable.listeners;return/*#__PURE__*/_jsx(Draggable,{dragging:isDragging,ref:setNodeRef,handle:handle,listeners:listeners,style:{opacity:isDragging?0:undefined}});}function DraggableItem2(_ref2){var handle=_ref2.handle,identifier=_ref2.identifier;var _useDraggable2=useDraggable({id:String(identifier)}),isDragging=_useDraggable2.isDragging,setNodeRef=_useDraggable2.setNodeRef,listeners=_useDraggable2.listeners;return/*#__PURE__*/_jsx(Draggable2,{dragging:isDragging,ref:setNodeRef,handle:handle,listeners:listeners,style:{opacity:isDragging?0:undefined}});}function isCaptureValid(toGoPlace,currentPlace,id,redCircles,blackCircles,isKing,tilesChecked,tilesTaken){if(currentPlace==toGoPlace){return tilesTaken;}if(redCircles.includes(String(currentPlace))&&id===\"black\"||blackCircles.includes(String(currentPlace))&&id===\"red\"){return undefined;}if(!(currentPlace%2==0&&toGoPlace%2==0||currentPlace%2!=0&&toGoPlace%2!=0)){return undefined;}tilesChecked.push(currentPlace);if(isKing){if(id===\"black\"&&redCircles.includes(String(currentPlace+(8+1)))&&(currentPlace+(8+1)>8&&currentPlace+(8+1))<56&&(currentPlace+(8+1))%8>1&&tilesChecked.findIndex(function(tile){return tile===currentPlace+2*(8+1);})==-1){var result=isCaptureValid(toGoPlace,currentPlace+2*(8+1),id,redCircles,blackCircles,isKing,tilesChecked,tilesTaken);if(result!=undefined){tilesTaken.push(currentPlace+(8+1));return tilesTaken;}}if(id===\"black\"&&redCircles.includes(String(currentPlace+(8-1)))&&(currentPlace+(8-1)>8&&currentPlace+(8-1))<56&&(currentPlace+(8-1))%8>1&&tilesChecked.findIndex(function(tile){return tile===currentPlace+2*(8-1);})==-1){var _result=isCaptureValid(toGoPlace,currentPlace+2*(8-1),id,redCircles,blackCircles,isKing,tilesChecked,tilesTaken);if(_result!=undefined){tilesTaken.push(currentPlace+(8-1));return tilesTaken;}}if(id===\"red\"&&blackCircles.includes(String(currentPlace-(8+1)))&&(currentPlace-(8+1)>8&&currentPlace-(8+1))<56&&(currentPlace-(8+1))%8>1&&tilesChecked.findIndex(function(tile){return tile===currentPlace-2*(8+1);})==-1){var _result2=isCaptureValid(toGoPlace,currentPlace-2*(8+1),id,redCircles,blackCircles,isKing,tilesChecked,tilesTaken);if(_result2!=undefined){tilesTaken.push(currentPlace-(8+1));return tilesTaken;}}if(id===\"red\"&&blackCircles.includes(String(currentPlace-(8-1)))&&(currentPlace-(8-1)>8&&currentPlace-(8-1))<56&&(currentPlace-(8-1))%8>1&&tilesChecked.findIndex(function(tile){return tile===currentPlace-2*(8-1);})==-1){var _result3=isCaptureValid(toGoPlace,currentPlace-2*(8-1),id,redCircles,blackCircles,isKing,tilesChecked,tilesTaken);if(_result3!=undefined){tilesTaken.push(currentPlace-(8-1));return tilesTaken;}}}if(id===\"black\"&&redCircles.includes(String(currentPlace-(8-1)))&&(currentPlace-(8-1)>8&&currentPlace-(8-1))<56&&(currentPlace-(8-1))%8>1&&tilesChecked.findIndex(function(tile){return tile===currentPlace-2*(8-1);})==-1){var _result4=isCaptureValid(toGoPlace,currentPlace-2*(8-1),id,redCircles,blackCircles,isKing,tilesChecked,tilesTaken);if(_result4!=undefined){tilesTaken.push(currentPlace-(8-1));return tilesTaken;}}if(id===\"black\"&&redCircles.includes(String(currentPlace-(8+1)))&&(currentPlace-(8+1)>8&&currentPlace-(8+1))<56&&(currentPlace-(8+1))%8>1&&tilesChecked.findIndex(function(tile){return tile===currentPlace-2*(8+1);})==-1){var _result5=isCaptureValid(toGoPlace,currentPlace-2*(8+1),id,redCircles,blackCircles,isKing,tilesChecked,tilesTaken);if(_result5!=undefined){tilesTaken.push(currentPlace-(8+1));return tilesTaken;}}if(id===\"red\"&&blackCircles.includes(String(currentPlace+(8-1)))&&(currentPlace+(8-1)>8&&currentPlace+(8-1))<56&&(currentPlace+(8-1))%8>1&&tilesChecked.findIndex(function(tile){return tile===currentPlace+2*(8-1);})==-1){var _result6=isCaptureValid(toGoPlace,currentPlace+2*(8-1),id,redCircles,blackCircles,isKing,tilesChecked,tilesTaken);if(_result6!=undefined){tilesTaken.push(currentPlace+(8-1));return tilesTaken;}}var test=(currentPlace+(8+1))%8;if(id===\"red\"&&blackCircles.includes(String(currentPlace+(8+1)))&&(currentPlace+(8+1)>8&&currentPlace+(8+1))<56&&(currentPlace+(8+1))%8>1&&tilesChecked.findIndex(function(tile){return tile===currentPlace+2*(8+1);})==-1){var _result7=isCaptureValid(toGoPlace,currentPlace+2*(8+1),id,redCircles,blackCircles,isKing,tilesChecked,tilesTaken);if(_result7!=undefined){tilesTaken.push(currentPlace+(8+1));return tilesTaken;}}else{return undefined;}}function isValid(toGoPlace,currentPlace,id,redCircles,blackCircles,isKing){//checks if any pieces exist on the square the player wants to move to\nif(currentPlace==toGoPlace){return false;}if(redCircles.includes(String(toGoPlace))||blackCircles.includes(String(toGoPlace))){return false;}if(isKing){//checks if a diagonal move is valid for a king piece\nif(currentPlace-(8-1)==toGoPlace||currentPlace-(8+1)==toGoPlace||currentPlace+(8-1)==toGoPlace||currentPlace+(8+1)==toGoPlace){return true;}}//checks if move is valid \nif((currentPlace+(8-1)==toGoPlace||currentPlace+(8+1)==toGoPlace)&&id===\"red\"){return true;//checks if move is valid\n}else if((currentPlace-(8-1)==toGoPlace||currentPlace-(8+1)==toGoPlace)&&id===\"black\"){return true;//checks if move is valid for taking pieces\n}var tilesChecked=[];var tilesTaken=[];return isCaptureValid(toGoPlace,currentPlace,id,redCircles,blackCircles,isKing,tilesChecked,tilesTaken);}export function GridGame(_ref3){var modifiers=_ref3.modifiers;var test;var grid=buildGrid();var _useState=useState(Array(12).fill(null)),_useState2=_slicedToArray(_useState,2),parents=_useState2[0],setParent=_useState2[1];var _useState3=useState(Array(12).fill(null)),_useState4=_slicedToArray(_useState3,2),parent2=_useState4[0],setParent2=_useState4[1];var _useState5=useState(Array(12).fill(false)),_useState6=_slicedToArray(_useState5,2),isDragging=_useState6[0],setIsDragging=_useState6[1];var _useState7=useState(Array(12).fill(false)),_useState8=_slicedToArray(_useState7,2),isDragging2=_useState8[0],setIsDragging2=_useState8[1];var _useState9=useState(Array(12).fill(false)),_useState10=_slicedToArray(_useState9,2),isKing=_useState10[0],setIsKing=_useState10[1];var _useState11=useState(Array(12).fill(false)),_useState12=_slicedToArray(_useState11,2),isKing2=_useState12[0],setIsKing2=_useState12[1];var draggableCheckersR=[];for(var i=0;i<12;i++){var draggable=/*#__PURE__*/_jsx(DraggableItem,{identifier:'draggable-itemR'+draggableCheckersR.length});draggableCheckersR.push(draggable);}var draggableCheckersB=[];for(var i=0;i<12;i++){var _draggable=/*#__PURE__*/_jsx(DraggableItem2,{identifier:'draggable-itemB'+draggableCheckersB.length});draggableCheckersB.push(_draggable);}var counterR=-1;var counterG=-1;var gridSquares=grid.map(function(row){var rowSquares=row.map(function(tile){var rowIndex=grid.indexOf(row);if(Number(tile)%2==0&&rowIndex%2==0||Number(tile)%2!=0&&rowIndex%2!=0){if(tile<24){counterR++;}if(tile>40){counterG++;}if(parents[counterR]===null&&tile<24){parents[counterR]=tile;}if(parent2[counterG]===null&&tile>40){parent2[counterG]=tile;}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Droppable_white,{id:tile,children:[parents[counterR]===null&&tile<24?draggableCheckersR[counterR]:null,parent2[counterG]===null&&tile>40?draggableCheckersB[counterG]:null,parent2.indexOf(tile)>-1?draggableCheckersB[parent2.indexOf(tile)]:'',parents.indexOf(tile)>-1?draggableCheckersR[parents.indexOf(tile)]:'']},tile)});}else{return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Droppable_Green,{id:tile},tile)});}});return/*#__PURE__*/_jsxs(\"div\",{children:[\" \",rowSquares,\" \"]});});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(DndContext,{modifiers:parents.every(function(element){return element===null;})?undefined:parent2.every(function(element){return element===null;})?undefined:modifiers,onDragStart:handleDragStart,onDragEnd:handleDragEnd,onDragCancel:handleDragCancel,children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:gridSquares}),/*#__PURE__*/_jsxs(DragOverlay,{children:[isDragging2.includes(true)?/*#__PURE__*/_jsx(Draggable2,{dragging:true,dragOverlay:true}):null,isDragging.includes(true)?/*#__PURE__*/_jsx(Draggable,{dragging:true,dragOverlay:true}):null]})]})});function handleDragStart(_ref4){var active=_ref4.active;if(active.id.includes(\"draggable-itemR\")&&isTurnRed){var newArray=_toConsumableArray(isDragging);var index=active.id;var getIndex=Number(index.match(/\\d+$/));newArray[getIndex]=true;setIsDragging(newArray);isTurnRed=false;isTurnBlack=true;}else if(active.id.includes(\"draggable-itemB\")&&isTurnBlack){var _newArray=_toConsumableArray(isDragging2);var _index=active.id;var getIndex=Number(_index.match(/\\d+$/));_newArray[getIndex]=true;setIsDragging2(_newArray);isTurnRed=true;isTurnBlack=false;}}function handleDragEnd(over){for(var i=0;i<isDragging.length;i++){if(isDragging[i]==true){var _over$over;var result=isValid(Number((_over$over=over.over)===null||_over$over===void 0?void 0:_over$over.id),Number(parents[i]),\"red\",parents,parent2,isKing[i]);if(result!=undefined){var _over$over2,_over$over3;var newArrayParent=_toConsumableArray(parents);var newArrayDragging=_toConsumableArray(isDragging);if(Array.isArray(result)){(function(){var result2=_toConsumableArray(result);var newArrayParent2=_toConsumableArray(parent2);newArrayParent2=newArrayParent2.filter(function(val){return result2.indexOf(Number(val))<0;});setParent2(newArrayParent2);})();}if(Number((_over$over2=over.over)===null||_over$over2===void 0?void 0:_over$over2.id)>56){var newIsKing=_toConsumableArray(isKing);newIsKing[i]=true;setIsKing(newIsKing);}newArrayParent[i]=over?(_over$over3=over.over)===null||_over$over3===void 0?void 0:_over$over3.id:null;setParent(newArrayParent);newArrayDragging[i]=false;setIsDragging(newArrayDragging);break;}else{var _newArrayDragging=_toConsumableArray(isDragging);_newArrayDragging[i]=false;setIsDragging(_newArrayDragging);isTurnRed=true;isTurnBlack=false;}}}for(var i=0;i<isDragging2.length;i++){if(isDragging2[i]==true){var _over$over4;var _result8=isValid(Number((_over$over4=over.over)===null||_over$over4===void 0?void 0:_over$over4.id),Number(parent2[i]),\"black\",parents,parent2,isKing2[i]);if(_result8!=undefined){var _over$over5,_over$over6;var _newArrayParent=_toConsumableArray(parent2);var _newArrayDragging2=_toConsumableArray(isDragging2);if(Array.isArray(_result8)){(function(){var result2=_toConsumableArray(_result8);var newArrayParent2=_toConsumableArray(parents);newArrayParent2=newArrayParent2.filter(function(val){return result2.indexOf(Number(val))<0;});setParent(newArrayParent2);})();}if(Number((_over$over5=over.over)===null||_over$over5===void 0?void 0:_over$over5.id)<=8){var _newIsKing=_toConsumableArray(isKing2);_newIsKing[i]=true;setIsKing2(_newIsKing);}_newArrayParent[i]=over?(_over$over6=over.over)===null||_over$over6===void 0?void 0:_over$over6.id:null;setParent2(_newArrayParent);_newArrayDragging2[i]=false;setIsDragging2(_newArrayDragging2);break;}else{var _newArrayDragging3=_toConsumableArray(isDragging2);_newArrayDragging3[i]=false;setIsDragging2(_newArrayDragging3);isTurnRed=false;isTurnBlack=true;}}}if(parents.join(\"\")===\"\"||parent2.join(\"\")===\"\"){window.location.reload();}}function handleDragCancel(event){if(event.active.id.includes(\"draggable-itemR\")){var newArray=_toConsumableArray(isDragging);var index=event.active.id;var getIndex=Number(index.match(/\\d+$/));newArray[getIndex]=false;setIsDragging(newArray);isTurnRed=true;isTurnBlack=false;}else{var _newArray2=_toConsumableArray(isDragging2);var _index2=event.active.id;var getIndex=Number(_index2.match(/\\d+$/));_newArray2[getIndex]=false;setIsDragging2(_newArray2);isTurnRed=false;isTurnBlack=true;}}}export default GridGame;//<Tile />","map":{"version":3,"sources":["/Users/michael/Desktop/sovereign-page/soveriegn-home/src/GridGame.tsx"],"names":["React","useState","DndContext","useDraggable","DragOverlay","Draggable","Droppable_Green","Droppable_white","Draggable2","isTurnRed","isTurnBlack","buildGrid","grid","element","y","x","String","DraggableItem","handle","identifier","id","isDragging","setNodeRef","listeners","opacity","undefined","DraggableItem2","isCaptureValid","toGoPlace","currentPlace","redCircles","blackCircles","isKing","tilesChecked","tilesTaken","includes","push","findIndex","tile","result","test","isValid","GridGame","modifiers","Array","fill","parents","setParent","parent2","setParent2","setIsDragging","isDragging2","setIsDragging2","setIsKing","isKing2","setIsKing2","draggableCheckersR","i","draggable","length","draggableCheckersB","counterR","counterG","gridSquares","map","row","rowSquares","rowIndex","indexOf","Number","every","handleDragStart","handleDragEnd","handleDragCancel","active","newArray","index","getIndex","match","over","newArrayParent","newArrayDragging","isArray","result2","newArrayParent2","filter","val","newIsKing","join","window","location","reload","event"],"mappings":"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","sourcesContent":["import React, { PropsWithoutRef, useState } from 'react';\nimport \"./GridGame.css\";\nimport {\n  DndContext, \n  useDraggable, \n  DragEndEvent, \n  CollisionDetection as CollisionDetectionType, \n  Modifiers, \n  UniqueIdentifier,\n  DragOverlay,\n  DragStartEvent,\n  DragCancelEvent,\n} from '@dnd-kit/core';\nimport {Draggable} from './Draggable';\nimport {Droppable_Green} from './Droppable_green';\nimport {Droppable_white} from './Droppable_white';\nimport {Draggable2} from './Draggable2';\nimport {} from './DraggableProperties';\nimport { timeline } from 'console';\ninterface Props {\n  modifiers?: Modifiers;\n  grid?: string[][];\n}\n\nvar isTurnRed = true;\nvar isTurnBlack = false;\n\nfunction buildGrid() {\n  var grid: string[][] = [];\n  var element = 1;\n  for (let y = 1; y < 9; y++) {\n    grid[y] = [];\n    for (let x = 1; x < 9; x++) {\n      grid[y][x] = String(element);\n      element++;\n    }\n  }\n\n  return grid;\n}\n\n\ninterface DraggableProps {\n  handle?: boolean;\n  identifier? : String\n}\n\n\n\nfunction DraggableItem({handle, identifier}: DraggableProps) {\n  const {isDragging, setNodeRef, listeners} = useDraggable({\n    id: String(identifier),\n  });\n  \n   return (\n    <Draggable\n      dragging={isDragging}\n      ref={setNodeRef}\n      handle={handle}\n      listeners={listeners}\n      style={{\n        opacity: isDragging ? 0 : undefined,\n      }}\n\n    />\n  );\n}\n\n\nfunction DraggableItem2({handle, identifier}: DraggableProps) {\n  const {isDragging, setNodeRef, listeners} = useDraggable({\n    id: String(identifier),\n  });\n   return (\n    <Draggable2\n      dragging={isDragging}\n      ref={setNodeRef}\n      handle={handle}\n      listeners={listeners}\n      style={{\n        opacity: isDragging ? 0 : undefined,\n      }}\n      \n    />\n  );\n}\n\nfunction isCaptureValid(toGoPlace : number, currentPlace: number, id : String, redCircles: String[], blackCircles : String[], isKing : boolean, tilesChecked: number[], tilesTaken: number[]) {\n  \n  if (currentPlace == toGoPlace) {\n    return tilesTaken;\n  }\n\n  if ((redCircles.includes(String(currentPlace)) && id === \"black\") || (blackCircles.includes(String(currentPlace))) && id === \"red\") {\n    return undefined;\n  } \n\n  if (!((currentPlace % 2 == 0 && toGoPlace % 2 == 0) || (currentPlace % 2 != 0 && toGoPlace % 2 != 0))) {\n    return undefined;\n  }\n\n  tilesChecked.push(currentPlace);\n\n    if (isKing) {\n    if (id === \"black\" && redCircles.includes(String(currentPlace + (8+1))) && (currentPlace + (8+1) > 8 && currentPlace + (8+1)) < 56 && (currentPlace + (8+1)) % 8 > 1 && tilesChecked.findIndex((tile: number) => tile === currentPlace + 2*(8+1)) == -1) {\n      let result = isCaptureValid(toGoPlace, currentPlace + 2*(8+1), id, redCircles, blackCircles, isKing, tilesChecked, tilesTaken);\n      if (result != undefined) {\n        tilesTaken.push(currentPlace + (8+1));\n        return tilesTaken;\n      }\n    } if (id === \"black\" && (redCircles.includes(String(currentPlace + (8-1)))) && (currentPlace + (8-1) > 8 && currentPlace + (8-1)) < 56 && (currentPlace + (8-1)) % 8 > 1  && tilesChecked.findIndex((tile: number) => tile === currentPlace + 2*(8-1)) == -1) {\n      let result = isCaptureValid(toGoPlace, currentPlace + 2*(8-1), id, redCircles, blackCircles, isKing, tilesChecked, tilesTaken);\n      if (result != undefined) {\n        tilesTaken.push(currentPlace + (8-1));\n        return tilesTaken;\n      }\n    }\n    \n    if (id === \"red\" &&  blackCircles.includes(String(currentPlace - (8+1))) && (currentPlace - (8+1) > 8 && currentPlace - (8+1)) < 56 && (currentPlace - (8+1)) % 8 > 1  && tilesChecked.findIndex((tile: number) => tile === currentPlace - 2*(8+1)) == -1) {\n      let result = isCaptureValid(toGoPlace, currentPlace - 2*(8+1), id, redCircles, blackCircles, isKing, tilesChecked, tilesTaken);\n      if (result != undefined) {\n        tilesTaken.push(currentPlace - (8+1));\n        return tilesTaken;\n      }\n    }\n\n    if (id === \"red\" && (blackCircles.includes(String(currentPlace - (8-1)))) && (currentPlace - (8-1) > 8 && currentPlace - (8-1)) < 56 && (currentPlace - (8-1)) % 8 > 1 && tilesChecked.findIndex((tile: number) => tile === currentPlace - 2*(8-1)) == -1) {\n      let result = isCaptureValid(toGoPlace, currentPlace -  2*(8-1), id, redCircles, blackCircles, isKing, tilesChecked, tilesTaken);\n      if (result != undefined) {\n        tilesTaken.push(currentPlace - (8-1));\n        return tilesTaken;\n      }\n    }\n  }\n\n  if (id === \"black\" && (redCircles.includes(String(currentPlace - (8-1)))) && (currentPlace - (8-1) > 8 && currentPlace - (8-1)) < 56 && (currentPlace - (8-1)) % 8 > 1  && tilesChecked.findIndex((tile: number) => tile === currentPlace - 2*(8-1)) == -1) {\n    let result = isCaptureValid(toGoPlace, currentPlace - 2*(8-1), id, redCircles, blackCircles, isKing, tilesChecked, tilesTaken);\n    if (result != undefined) {\n      tilesTaken.push(currentPlace - (8-1));\n      return tilesTaken;\n    }\n  } \n  \n  if (id === \"black\" && redCircles.includes(String(currentPlace - (8+1))) && (currentPlace - (8+1) > 8 && currentPlace - (8+1)) < 56 && (currentPlace - (8+1)) % 8 > 1 && tilesChecked.findIndex((tile: number) => tile === currentPlace - 2*(8+1)) == -1) {\n    let result = isCaptureValid(toGoPlace, currentPlace - 2*(8+1), id, redCircles, blackCircles, isKing, tilesChecked, tilesTaken);\n    if (result != undefined) {\n      tilesTaken.push(currentPlace - (8+1));\n      return tilesTaken;\n    }\n  } \n  \n  if (id === \"red\" && (blackCircles.includes(String(currentPlace + (8-1)))) && (currentPlace + (8-1) > 8 && currentPlace + (8-1)) < 56 && (currentPlace + (8-1)) % 8 > 1 && tilesChecked.findIndex((tile: number) => tile === currentPlace + 2*(8-1)) == -1) {\n    let result = isCaptureValid(toGoPlace, currentPlace + 2*(8-1), id, redCircles, blackCircles, isKing, tilesChecked, tilesTaken);\n    if (result != undefined) {\n      tilesTaken.push(currentPlace + (8-1));\n      return tilesTaken;\n    }\n  } \n  \n  let test = (currentPlace + (8+1)) % 8;\n  if (id ===\"red\" && blackCircles.includes(String(currentPlace + (8+1))) && (currentPlace + (8+1) > 8 && currentPlace + (8+1)) < 56 && (currentPlace + (8+1)) % 8 > 1 && tilesChecked.findIndex((tile: number) => tile === currentPlace + 2*(8+1)) == -1) {\n    let result = isCaptureValid(toGoPlace, currentPlace + 2*(8+1), id, redCircles, blackCircles, isKing, tilesChecked, tilesTaken);\n    if (result != undefined) {\n      tilesTaken.push(currentPlace + (8+1));\n      return tilesTaken;\n    }\n  } else {\n    return undefined;\n  }\n}\n\nfunction isValid(toGoPlace : number, currentPlace: number, id : String, redCircles: String[], blackCircles : String[], isKing : boolean) {\n  //checks if any pieces exist on the square the player wants to move to\n    if (currentPlace == toGoPlace) {\n    return false;\n  }\n  \n  if (redCircles.includes(String(toGoPlace)) || blackCircles.includes(String(toGoPlace))) {\n    return false;\n  } \n\n  if (isKing) {\n      //checks if a diagonal move is valid for a king piece\n      if ((currentPlace - (8-1) == toGoPlace || currentPlace - (8+1) == toGoPlace || currentPlace + (8-1) == toGoPlace || currentPlace + (8+1) == toGoPlace)) {\n        return true;\n      }\n  } \n  \n  //checks if move is valid \n  if ((currentPlace + (8-1) == toGoPlace || currentPlace + (8+1) == toGoPlace) && id === \"red\") {\n    return true;\n    //checks if move is valid\n  } else if ((currentPlace - (8-1) == toGoPlace || currentPlace - (8+1) == toGoPlace) && id === \"black\") { \n    return true;\n    //checks if move is valid for taking pieces\n  } \n  let tilesChecked: number[] = [];\n  let tilesTaken: number[] = [];\n  return isCaptureValid(toGoPlace, currentPlace, id, redCircles, blackCircles, isKing, tilesChecked, tilesTaken)\n}\n\nexport function GridGame({modifiers,}: Props) {\n  var test : any;\n    const grid = buildGrid();\n    const [parents, setParent] = useState<UniqueIdentifier[]>(Array(12).fill(null));\n    const [parent2, setParent2] = useState<UniqueIdentifier[]>(Array(12).fill(null));\n    const [isDragging, setIsDragging] = useState<boolean[]>(Array(12).fill(false));\n    const [isDragging2, setIsDragging2] = useState<boolean[]>(Array(12).fill(false));\n    const [isKing, setIsKing] = useState<boolean[]>(Array(12).fill(false))\n    const [isKing2, setIsKing2] = useState<boolean[]>(Array(12).fill(false))\n\n    const draggableCheckersR : any[] = [];\n  \n    for (var i = 0; i < 12; i++) {\n      const draggable = <DraggableItem identifier = {'draggable-itemR'+(draggableCheckersR.length)}/>;\n      draggableCheckersR.push(draggable);\n    }\n\n    const draggableCheckersB : any[] = [];\n  \n    for (var i = 0; i < 12; i++) {\n      const draggable = <DraggableItem2 identifier = {'draggable-itemB'+(draggableCheckersB.length)}/>;\n      draggableCheckersB.push(draggable);\n    }\n\n    var counterR = -1;\n    var counterG = -1;\n\n    const gridSquares = grid.map((row: any[]) => {\n          const rowSquares = row.map((tile:any) => {\n            var rowIndex = grid.indexOf(row);\n           \n            if (((Number(tile)%2 == 0 && rowIndex%2 ==0) || (Number(tile)%2 != 0 && rowIndex%2 !=0))) {\n              \n              if (tile < 24){\n                counterR++;\n              }\n\n              if (tile > 40){\n                counterG++;\n              }\n\n              if (parents[counterR] === null && tile < 24){\n                parents[counterR] = tile;\n              }\n\n              if (parent2[counterG] === null && tile > 40){\n                parent2[counterG] = tile;\n              }\n\n              return (    \n                <div>\n                  <Droppable_white key={tile} id={tile}>\n                    {parents[counterR] === null && tile < 24? draggableCheckersR[counterR]: null}\n                    {parent2[counterG] === null && tile > 40? draggableCheckersB[counterG]: null}\n                    {parent2.indexOf(tile) > -1 ? draggableCheckersB[parent2.indexOf(tile)]: ''}\n                    {parents.indexOf(tile) > -1 ? draggableCheckersR[parents.indexOf(tile)]: ''}\n                  </Droppable_white> \n                </div>  \n              ); \n            } else {\n              return (      \n                <div>\n                   <Droppable_Green key={tile} id={tile}>\n\n                  </Droppable_Green> \n                </div> \n              ); \n            }\n           });\n\n        return (<div> {rowSquares} </div>);\n          });\n\n    return (\n      <div>\n      <DndContext \n        modifiers = {\n          parents.every((element: String | null) => element === null) ? undefined: parent2.every((element: String | null) => element === null) ? undefined: modifiers\n        }\n        onDragStart={handleDragStart}\n        onDragEnd={handleDragEnd}\n        onDragCancel={handleDragCancel}\n        > \n          <div className = \"grid\">\n            \n            {gridSquares}\n          \n            </div>\n              <DragOverlay>\n                  {isDragging2.includes(true) ? <Draggable2 dragging dragOverlay /> : null}\n                  {isDragging.includes(true) ?  <Draggable dragging dragOverlay /> : null}\n              </DragOverlay>\n        </DndContext> \n        </div>\n    );\n\n    function handleDragStart({ active}: DragStartEvent  ) {\n          if (active.id.includes(\"draggable-itemR\") && isTurnRed){\n            let newArray = [...isDragging];\n            let index = active.id\n            var getIndex = Number(index.match(/\\d+$/));\n            newArray[getIndex] = true;\n            setIsDragging(newArray);\n            isTurnRed = false;\n            isTurnBlack = true;\n          } else if (active.id.includes(\"draggable-itemB\") && isTurnBlack) {\n            let newArray = [...isDragging2];\n            let index = active.id\n            var getIndex = Number(index.match(/\\d+$/));\n            newArray[getIndex] = true;\n            setIsDragging2(newArray);\n            isTurnRed = true;\n            isTurnBlack = false;\n          }\n    }\n    function handleDragEnd(over: DragEndEvent) {\n      for (var i = 0; i < isDragging.length; i++) {\n        if (isDragging[i] == true) {\n          let result = isValid(Number(over.over?.id), Number(parents[i]), \"red\", parents, parent2, isKing[i]);\n          if (result != undefined){\n            let newArrayParent = [...parents];\n            let newArrayDragging = [...isDragging];\n            \n            if (Array.isArray(result)) {\n              let result2 = [...result]\n              let newArrayParent2 = [...parent2];\n              newArrayParent2 = newArrayParent2.filter(function(val) {\n                return result2.indexOf(Number(val)) < 0; \n              });\n              setParent2(newArrayParent2);\n            }\n\n            if (Number(over.over?.id) > 56) {\n              let newIsKing = [...isKing];\n              newIsKing[i] = true;\n              setIsKing(newIsKing);\n            }\n\n            newArrayParent[i] = (over ? over.over?.id : null as any);\n            setParent(newArrayParent);\n            \n            newArrayDragging[i] = false;\n            setIsDragging(newArrayDragging);\n            break;\n          } else {\n            let newArrayDragging = [...isDragging];\n            newArrayDragging[i] = false;\n            setIsDragging(newArrayDragging);\n            isTurnRed = true;\n            isTurnBlack = false;\n          }\n        } \n      }\n\n      for (var i = 0; i < isDragging2.length; i++) {\n        if (isDragging2[i] == true) {\n          let result = isValid(Number(over.over?.id), Number(parent2[i]), \"black\", parents, parent2, isKing2[i])\n          if (result != undefined) {\n            let newArrayParent = [...parent2];\n            let newArrayDragging = [...isDragging2];\n                        \n            if (Array.isArray(result)) {\n              let result2 = [...result]\n              let newArrayParent2 = [...parents];\n              newArrayParent2 = newArrayParent2.filter(function(val) {\n                return result2.indexOf(Number(val)) < 0; \n              });\n              setParent(newArrayParent2);\n            }\n            if (Number(over.over?.id) <= 8) {\n              let newIsKing = [...isKing2];\n              newIsKing[i] = true;\n              setIsKing2(newIsKing);\n            }\n\n            newArrayParent[i] = (over ? over.over?.id : null as any);\n            setParent2(newArrayParent);\n            \n            newArrayDragging[i] = false;\n            setIsDragging2(newArrayDragging);\n            break;\n          } else {\n            let newArrayDragging = [...isDragging2];\n            newArrayDragging[i] = false;\n            setIsDragging2(newArrayDragging);\n            isTurnRed = false;\n            isTurnBlack = true;\n          }\n        }\n      }\n      if (parents.join(\"\") === \"\" || parent2.join(\"\") === \"\") {\n        window.location.reload();\n      }\n    }\n\n    function handleDragCancel(event : DragCancelEvent) {\n      if (event.active.id.includes(\"draggable-itemR\")){\n        let newArray = [...isDragging];\n        let index = event.active.id\n        var getIndex = Number(index.match(/\\d+$/));\n        newArray[getIndex] = false;\n        setIsDragging(newArray);\n        isTurnRed = true;\n        isTurnBlack = false;\n      } else {\n        let newArray = [...isDragging2];\n        let index = event.active.id\n        var getIndex = Number(index.match(/\\d+$/));\n        newArray[getIndex] = false;\n        setIsDragging2(newArray);\n        isTurnRed = false;\n        isTurnBlack = true;\n      }\n    }\n    \n}\n\n\nexport default GridGame;\n//<Tile />  "]},"metadata":{},"sourceType":"module"}